/* CSS personnalisé pour Wirechat avec sidebar */

/* Correction spécifique pour la page des chats Wirechat */
.wirechat-page-container {
    display: flex !important;
    width: 100% !important;
    height: 100vh !important;
    min-height: 100vh !important;
    overflow: hidden !important;
}

/* Correction de la sidebar des conversations Wirechat */
.wirechat-conversations-sidebar {
    flex-shrink: 0 !important;
    width: 360px !important;
    border-right: 1px solid var(--wc-light-border) !important;
    overflow-y: auto !important;
    background: var(--wc-light-primary) !important;
}

.dark .wirechat-conversations-sidebar {
    border-right: 1px solid var(--wc-dark-border) !important;
    background: var(--wc-dark-primary) !important;
}

/* Correction de la zone principale du chat Wirechat */
.wirechat-main-chat-area {
    flex: 1 !important;
    display: flex !important;
    flex-direction: column !important;
    overflow: hidden !important;
    background: var(--wc-light-primary) !important;
    height: 100vh !important;
}

.dark .wirechat-main-chat-area {
    background: var(--wc-dark-primary) !important;
}

/* Correction du footer sticky */
.wirechat-footer {
    position: sticky;
    bottom: 0;
    background: var(--wc-light-secondary);
    z-index: 10;
    border-top: 1px solid var(--wc-light-border);
}

.dark .wirechat-footer {
    background: var(--wc-dark-secondary);
    border-top: 1px solid var(--wc-dark-border);
}

/* Correction de la hauteur des messages */
.wirechat-messages {
    height: calc(100vh - 200px); /* Hauteur ajustée pour laisser de la place au header et footer */
    overflow-y: auto;
}

@media (min-width: 1024px) {
    .wirechat-messages {
        height: calc(100vh - 220px);
    }
}

/* Correction de l'alignement des messages */
.wirechat-message-outgoing {
    justify-content: flex-end !important;
}

.wirechat-message-incoming {
    justify-content: flex-start !important;
}

/* Correction de la hauteur du textarea */
.wirechat-textarea {
    min-height: 40px;
    max-height: 120px;
    resize: none;
}

/* Correction du layout des chats */
.wirechat-chats-layout {
    display: flex;
    height: 100vh;
    overflow: hidden;
}

.wirechat-chats-sidebar {
    flex-shrink: 0;
    width: 360px;
    border-right: 1px solid var(--wc-light-border);
    overflow-y: auto;
}

.dark .wirechat-chats-sidebar {
    border-right: 1px solid var(--wc-dark-border);
}

.wirechat-chats-main {
    flex: 1;
    display: flex;
    flex-direction: column;
    overflow: hidden;
}

/* Correction de la hauteur du composant principal */
.wirechat-chat-component {
    height: 100vh;
    display: flex;
    flex-direction: column;
}

/* Correction du header du chat */
.wirechat-chat-header {
    flex-shrink: 0;
    padding: 1rem;
    border-bottom: 1px solid var(--wc-light-border);
    background: var(--wc-light-secondary);
}

.dark .wirechat-chat-header {
    border-bottom: 1px solid var(--wc-dark-border);
    background: var(--wc-dark-secondary);
}

/* Correction du body du chat */
.wirechat-chat-body {
    flex: 1;
    overflow-y: auto;
    padding: 1rem;
}

/* Correction du footer du chat */
.wirechat-chat-footer {
    flex-shrink: 0;
    padding: 1rem;
    background: var(--wc-light-secondary);
    border-top: 1px solid var(--wc-light-border);
}

.dark .wirechat-chat-footer {
    background: var(--wc-dark-secondary);
    border-top: 1px solid var(--wc-dark-border);
}

/* Correction des variables CSS Wirechat pour notre thème */
:root {
    --wc-light-primary: #ffffff;
    --wc-light-secondary: #f8fafc;
    --wc-light-border: #e2e8f0;
    --wc-dark-primary: #1e293b;
    --wc-dark-secondary: #334155;
    --wc-dark-border: #475569;
    --wc-brand-primary: #3b82f6;
}

.dark {
    --wc-light-primary: #1e293b;
    --wc-light-secondary: #334155;
    --wc-light-border: #475569;
    --wc-dark-primary: #0f172a;
    --wc-dark-secondary: #1e293b;
    --wc-dark-border: #334155;
}

/* Correction spécifique pour la page des chats Wirechat */
.wirechat-page-container {
    height: 100vh !important;
    min-height: 100vh !important;
}

.wirechat-page-container > div:first-child {
    width: 360px !important;
    flex-shrink: 0 !important;
    height: 100vh !important;
}

.wirechat-page-container > main {
    flex: 1 !important;
    display: flex !important;
    flex-direction: column !important;
    height: 100vh !important;
}

/* Correction du footer sticky Wirechat */
.wirechat-page-container footer {
    position: sticky !important;
    bottom: 0 !important;
    background: var(--wc-light-secondary) !important;
    z-index: 50 !important;
}

.dark .wirechat-page-container footer {
    background: var(--wc-dark-secondary) !important;
}

/* Correction des composants internes Wirechat */
.wirechat-page-container .flex.flex-col.grow.h-full {
    height: 100vh !important;
    min-height: 100vh !important;
}

.wirechat-page-container .overflow-y-auto {
    height: calc(100vh - 200px) !important;
    min-height: calc(100vh - 200px) !important;
}

/* Correction de la hauteur des messages Wirechat */
.wirechat-page-container main[class*="overflow-y-auto"] {
    height: calc(100vh - 300px) !important;
    overflow-y: auto !important;
}

/* Correction de l'alignement des messages Wirechat */
.wirechat-page-container .justify-end {
    justify-content: flex-end !important;
}

.wirechat-page-container .justify-start {
    justify-content: flex-start !important;
}

/* NOUVELLES CORRECTIONS POUR LA MESSAGERIE INTÉGRÉE */

/* Correction spécifique pour la page de chat individuel */
.wirechat-page-container .w-full.flex.min-h-full.h-full.rounded-lg {
    height: 100vh !important;
    min-height: 100vh !important;
    overflow: hidden !important;
}

/* Correction de la sidebar des conversations */
.wirechat-page-container .hidden.md\\:grid {
    height: 100vh !important;
    min-height: 100vh !important;
    overflow-y: auto !important;
}

/* Correction de la zone principale des messages */
.wirechat-page-container main.grid.w-full.grow {
    height: 100vh !important;
    min-height: 100vh !important;
    overflow: hidden !important;
    display: flex !important;
    flex-direction: column !important;
}

/* Correction du composant de chat principal */
.wirechat-page-container .w-full.transition {
    height: 100% !important;
    display: flex !important;
    flex-direction: column !important;
    overflow: hidden !important;
}

/* Correction de la structure interne du chat */
.wirechat-page-container .flex.flex-col.grow.h-full.relative {
    height: 100% !important;
    display: flex !important;
    flex-direction: column !important;
}

/* Correction du header du chat */
.wirechat-page-container .flex.flex-col.grow.h-full.relative > div:first-child {
    flex-shrink: 0 !important;
}

/* Correction du body des messages */
.wirechat-page-container .flex.flex-col.h-full.relative.gap-2.gap-y-4.p-4 {
    flex: 1 !important;
    overflow-y: auto !important;
    height: auto !important;
    min-height: 0 !important;
    max-height: calc(100vh - 200px) !important;
}

/* Correction du footer du chat */
.wirechat-page-container .shrink-0.h-auto.relative.sticky.bottom-0.mt-auto {
    position: sticky !important;
    bottom: 0 !important;
    background: var(--wc-light-secondary) !important;
    z-index: 100 !important;
    border-top: 1px solid var(--wc-light-border) !important;
    margin-top: auto !important;
}

.dark .wirechat-page-container .shrink-0.h-auto.relative.sticky.bottom-0.mt-auto {
    background: var(--wc-dark-secondary) !important;
    border-top: 1px solid var(--wc-dark-border) !important;
}

/* Correction de la zone de saisie */
.wirechat-page-container .px-3.border-t.shadow-sm {
    background: var(--wc-light-secondary) !important;
    border-top: 1px solid var(--wc-light-border) !important;
}

.dark .wirechat-page-container .px-3.border-t.shadow-sm {
    background: var(--wc-dark-secondary) !important;
    border-top: 1px solid var(--wc-dark-border) !important;
}

/* Correction pour les écrans mobiles */
@media (max-width: 768px) {
    .wirechat-page-container .flex.flex-col.h-full.relative.gap-2.gap-y-4.p-4 {
        max-height: calc(100vh - 180px) !important;
        padding: 1rem !important;
    }
    
    .wirechat-page-container .shrink-0.h-auto.relative.sticky.bottom-0.mt-auto {
        position: fixed !important;
        bottom: 0 !important;
        left: 0 !important;
        right: 0 !important;
        width: 100% !important;
    }
}

/* Correction pour les écrans de bureau */
@media (min-width: 769px) {
    .wirechat-page-container .flex.flex-col.h-full.relative.gap-2.gap-y-4.p-4 {
        max-height: calc(100vh - 220px) !important;
    }
}

/* Correction de l'espacement des messages */
.wirechat-page-container .flex.flex-col.h-full.relative.gap-2.gap-y-4.p-4 > div {
    margin-bottom: 0.5rem !important;
}

/* Correction du scroll automatique vers le bas */
.wirechat-page-container .flex.flex-col.h-full.relative.gap-2.gap-y-4.p-4 {
    scroll-behavior: smooth !important;
}

/* Correction de la hauteur minimale pour éviter le footer flottant */
.wirechat-page-container .flex.flex-col.h-full.relative.gap-2.gap-y-4.p-4 {
    min-height: calc(100vh - 300px) !important;
}

/* Correction de l'alignement du footer */
.wirechat-page-container .shrink-0.h-auto.relative.sticky.bottom-0.mt-auto {
    width: 100% !important;
    left: 0 !important;
    right: 0 !important;
}
